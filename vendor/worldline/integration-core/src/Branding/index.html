<!DOCTYPE html>
<!--suppress HtmlUnknownAnchorTarget, HtmlUnknownTarget -->
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= brand.name %> admin FE</title>
    <link rel="stylesheet" type="text/css" href="/css/op-core.css" />
</head>
<body>
<!-- This is a main placeholder that should be used in all integrations -->
<div id="op-page" class="op-page">
    <main>
        <div class="opp-content-holder">
            <header id="op-main-header">
            </header>
            <main id="op-main-page-holder"></main>
        </div>
    </main>
    <div class="op-page-loader ops--hidden" id="op-spinner">
        <div class="op-loader opt--large">
            <span class="opp-spinner"></span>
        </div>
    </div>
</div>
<!-- Services and utilities -->
<script src="/js/index.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const baseApiUrl = 'https://localhost:3750';
        if (!OnlinePaymentsFE) {
            OnlinePaymentsFE = {};
        }
        
        OnlinePaymentsFE.translations = {
            default: '%default_translations%',
            current: '%current_lang_translations%'
        };

        OnlinePaymentsFE.brand = <%= JSON.stringify(brand) %>;
        OnlinePaymentsFE.utilities.showLoader();

        // holds URLs to all API endpoints and other possible configuration for each page
        const pageConfiguration = {
            connection: {
                getSettingsUrl: baseApiUrl + '/integration/store/{storeId}/connection',
                submitUrl: baseApiUrl + '/integration/store/{storeId}/connection',
                disconnectUrl: baseApiUrl + '/integration/store/{storeId}/connection',
                getMerchantsUrl: baseApiUrl + '/integration/store/{storeId}/merchants',
                validateConnectionUrl: baseApiUrl + '/integration/store/{storeId}/connection/test',
                validateWebhookUrl: baseApiUrl + '/integration/store/{storeId}/webhook/validate'
            },
            payments: {
                getConfiguredPaymentsUrl: baseApiUrl + '/integrations/store/{storeId}/paymentConfigurations',
                addMethodConfigurationUrl: baseApiUrl + '/integrations/store/{storeId}/paymentConfigurations',
                getMethodConfigurationUrl:
                    baseApiUrl + '/integrations/store/{storeId}/paymentConfigurations/{methodId}',
                saveMethodConfigurationUrl:
                    baseApiUrl + '/integrations/store/{storeId}/paymentConfigurations/{methodId}',
                getAvailablePaymentsUrl: baseApiUrl + '/integrations/store/{storeId}/availablePaymentMethods',
                deleteMethodConfigurationUrl:
                    baseApiUrl + '/integrations/store/{storeId}/paymentConfigurations/{methodId}'
            },
            settings: {
                getShippingStatusesUrl: baseApiUrl + '/shop/stores/{storeId}/orderStatuses',
                getSettingsUrl: baseApiUrl + '/integration/store/{storeId}',
                saveSettingsUrl: baseApiUrl + '/integration/store/{storeId}',
                getOrderMappingsUrl: baseApiUrl + '/integration/store/{storeId}/orderMappings',
                saveOrderMappingsUrl: baseApiUrl + '/integration/store/{storeId}/orderMappings',
                getGivingUrl: baseApiUrl + '/integration/store/{storeId}/giving',
                saveGivingUrl: baseApiUrl + '/integration/store/{storeId}/giving',
                getSystemInfoUrl: baseApiUrl + '/integration/system/info',
                saveSystemInfoUrl: baseApiUrl + '/integration/system/info',
                downloadWebhookReportUrl: 'https://logeecom.com/wp-content/uploads/2016/09/logo-white.png',
                downloadIntegrationReportUrl:
                    'https://logeecom.com/wp-content/uploads/2016/09/careers-first-section.jpg',
                downloadSystemInfoFileUrl: 'https://logeecom.com/wp-content/uploads/2016/09/logo-white.png',
                webhookValidationUrl: baseApiUrl + '/integration/store/{storeId}/webhook/validate',
                integrationValidationUrl: baseApiUrl + '/integration/system/info/validate',
                integrationValidationTaskCheckUrl:
                    baseApiUrl + '/integration/system/{queueItemId}/info/validate'
            },
            notifications: {
                getShopEventsNotifications: baseApiUrl + '/integrations/store/{storeId}/notifications/event',
                getWebhookEventsNotifications:
                    baseApiUrl + '/integrations/store/{storeId}/notifications/webhooks'
            }
        };

        OnlinePaymentsFE.state = new OnlinePaymentsFE.StateController({
            brand: OnlinePaymentsFE.brand,
            storesUrl: baseApiUrl + '/shops/stores',
            connectionDetailsUrl: baseApiUrl + '/integration/store/{storeId}/connection',
            merchantsUrl: baseApiUrl + '/integration/store/{storeId}/merchants',
            currentStoreUrl: baseApiUrl + '/shops/stores/current',
            stateUrl: baseApiUrl + '/integration/stores/{storeId}/state',
            versionUrl: baseApiUrl + '/integration/version',
            downloadVersionUrl: 'https://logeecom.com/wp-content/uploads/2016/09/logo-white.png',
            pageConfiguration: pageConfiguration,
            templates: {
                sidebar: '%sidebar%'
            }
        });

        OnlinePaymentsFE.state.display();
        OnlinePaymentsFE.utilities.hideLoader();
    });
</script>
</body>
</html>
